# SmokeApp_PortFolio
저의 첫 프로젝트 금연 다이어리 앱 "그만" 입니다. 최대한 기능들을 적용하면서, 이해하기 위해 노력하였으며, <br><br>
코드는 아직 스파게티 코드이지만, 만드는 과정에서 점점 코드를 사용하는 법을 검색해가며 개선하였습니다. <br><br>
아직 부족하더라도 누구보다 노력하는 모습을 보여드리겠습니다! <br><br>

## Introduction (Developer)
- 이름 백수열
- 나이 26살(만 24세)
- 20살 한국가스공사라는 공기업에서 인턴 생활을 하면서, 하고 싶은 일에 대한 갈망과 회의를 느끼게 되었습니다.<br><br>
21살, 군대에 가고, 23살에 전역을 하여서 하고 싶은 일을 찾아보자며, 주방에서 일하기도 하고, 기타에 관심이 많아, <br><br>
기타 도매업을 알아보아 상품을 판매해보기도 하였습니다. 그리고, 하이마트 가전제품 기사로도 1년간 일하면서,  진로에 대한<br><br>
많은 방황을 했습니다. 그러면서, 2020년 상반기에 일기를 써보고자 티스토리 블로그를 시작하였는데, 블로그를 꾸미던 도중, <br><br>
HTML이란 (당시에는 HTML이 무엇인지 몰랐습니다) 해커들이나 만질 것 같은 문자들이 나열되어 있었고, 이게 뭔가 싶어 흥미를 느끼게 됩니다. <br><br>
그렇게 개발에 첫걸음은 블로그에서 시작되게 되었습니다. "아 웹페이지를 만들 수 있구나, 더 나아가 앱도 만들 수 있구나..!" 라는 생각에<br><br>
이고잉님의 생활코딩 강의를 듣게 됩니다. 그 당시 그 개발이 배우는 것 자체가 너무 재밌어서, 아예 이 분야에 몸을 담가보고 싶다는 생각이 들어, <br><br>
아무도 없는 곳에서 이 분야만 공부해보자 마음을 먹었고, 광명(제가 살던 곳)에서 연고도 없는<br><br>
화성이란 곳 당직 아르바이트를 구해서, 밤에는 일하고 낮에는 온통 프로그래밍에 빠지며, 반년간 안드로이드에 대해서 하루 14시간씩 기본으로 공부하였습니다. <br><br>
원하는 기능을 한가지씩 만들어 보면서, 저에게 정말 맞는 일이라고 판단하였고, 잠자는 시간도 잊은 채, 프로그래밍에 몰두하였습니다. <br><br>
이론도 배우고, 동시에 앱도 만들다 보니 벌써, 앱을 만든 지 5개월이란 시간이 걸렸지만, 저에게 참 의미가 많은 프로젝트였습니다. <br><br>
개발에 빠져 8년 동안 피우던 담배도 동시에 끊어버려 현재, 6개월째 금연이라는 놀라운 기록도 유지 중입니다. <br><br>
앞으로 안드로이드 분야, 더 나아가 리액트 네이티브나, 플러터, 그리고 아이폰 개발도 더 배우고 싶은 욕심이 넘쳐납니다.<br><br>
최근에는 비트코인 분야에서 자동매매 기술을 좀 더 효율적으로 사용하고 싶어 파이썬을 배울 예정이기도 합니다.<br><br>
미친 열정과 식지 않는 관심으로 원하는 회사에 녹아들고 싶습니다.<br><br>

![앱 소개 배경 로고](https://user-images.githubusercontent.com/74702665/113533691-7cf16900-9609-11eb-8fa2-f0f436d25015.jpg)

<br><br>
## Introduction (App)
- 금연 다이어리 앱 "그만"은 제가 항상 어려워했던 금연을 좀 더 적극적이고, 효율적으로 잘 끊어낼 수 있지 않을까 생각이 들었고,<br><br>
매일매일 동기부여를 주는 금연앱을 한번 만들어 보자는 계기가 되었습니다.<br><br>
#### 구현 전 기획과정
- 기존에 나온 금연 앱들은 UI에 신경을 많이 쓰지 않은 것 같은 느낌을 받았고, 금연에 대한 느낌을 긍정적인 밝은 색으로 만들어보고자 했습니다.<br><br>
- 금연에 대한 정보를 조사하던 중, 오히려 남성분들보다 여성분들이 사회적으로 자신이 담배 피운다는 사실을 말하는 것을 꺼려하는 부분이 있어,<br><br>
오히려 주변에 금연 사실을 알리는 남자보다 더 금연을 어려워하는 경우가 있다고 들었습니다.<br><br>
- 이 사실을 바탕으로 여성분들이 금연에 대한 시각을 긍정적으로 바라볼 수 있도록, 밝고, 우아한 베이지 계열에 색상으로 디자인하였습니다.<br><br>
- 금연을 하며, 성취감을 주기 위해 일정 금연 시, 회원에게 등급을 나누는 등급표를 넣고자 했습니다.<br><br>
- 매일매일 자신의 성과를 기록하는 금연 다이어리를 만들고자 했습니다.(디자인은 티스토리 블로그 앱을 참고했습니다.)<br><br>
- 휴대폰(디바이스)를 다른 폰으로 바꾸어, 금연 기록이 없어지지 않게, 로그인 기능을 넣고자 하여, 서버를 구축하고자 했습니다.
<br><br>
## 본격 구현과정
#### 사용된 언어
- JAVA
#### 서버
- nginX
- ubuntu
- AWS EC2
- mysql
- php
- FireBase(이미지)
<br><br>

https://user-images.githubusercontent.com/74702665/113539392-b087bf80-9618-11eb-8b49-e5caa56ce3c1.mp4

<br><br>(영상 길이가 다소길어 링크로 올려두었습니다.)
<br><br>
- 데이터베이스와의 통신은 Volley 라이브러리를 사용하여 간편하게 데이터를 주고받을 수 있었습니다.<br><br>
- 처음에는 Google SMTP를 활용하여 이메일 인증을 구현하였지만, 보안 문제도 있고, 속도가 느려, 네이버 SMTP를 사용하였습니다.<br><br>
- php문을 이용해 mysql을 액세스하여 phpmyadmin(GUI)를 이용해 간편하게 회원정보를 관리할 수 있었습니다.<br><br>
- 이런식으로 가입하게 되면
<br><br>
![데베 1](https://user-images.githubusercontent.com/74702665/113539743-6fdc7600-9619-11eb-933d-c80d737d0be9.png)
<br><br>
- 회원정보와 각 회원의 고유의 일기 데이터베이스를 얻게 됩니다.ex)회원고유넘버 = 1, Diary + 고유넘버 => Diary1<br><br>
그 후에 개인정보는 다음과 같이 기입이 됩니다. <br><br>



<br><br>

![image](https://user-images.githubusercontent.com/74702665/113539893-ccd82c00-9619-11eb-814a-4162218faa17.png)

<br><br>

- 왼쪽에서부터 고유번호, 아이디, 비밀번호, 닉네임, 이메일, 금연 시작 시간, 하루 담배양, 하루 담뱃값, 목표(변경 가능), 로그인 첫유저인지 식별하는
키입니다.<br><br>
- 비밀번호는 서버에서 SHA-2, SHA512형식으로 해시화를 사용한 후, 한 번 더 서버에서 Salting을 하여 보안에 중점을 두었습니다.

<br><br>


https://user-images.githubusercontent.com/74702665/113541375-0bbbb100-961d-11eb-952d-f5ce20b7af64.mp4

<br><br>
- 아이디 찾기와 비밀번호 찾기도 이 역시 php를 이용하여 sql문을 입력해 데이터베이스에서 삭제기능과 조회기능, 그리고 수정기능을 사용했습니다.<br><br>
- 로그인 상황에서도 마찬가지였지만, mysql과 php에 대한 지식이 많지 않기 때문에, 구글링을 통해서, 어떻게든 이해하려고 노력하였고, 그렇기 때문에<br><br>
시간이 많이 걸렸지만 데이터베이스를 이해하는 데 많은 도움이 된 과정입니다.

<br><br>

https://user-images.githubusercontent.com/74702665/113541490-4d4c5c00-961d-11eb-8ef6-ce9def4d68da.mp4

<br><br>
- 메인화면입니다. 프로필 설정과 목표설정 및 금연 시간, 현재 목표, 현재 피지 않는 담배 개수, 담배로 인해서 모인 돈 등을 표시해줍니다.<br><br>
- 전체적인 틀은 BottomNavigationView를 활용하여, 4개의 Fragment를 위에서 inflation 해주었습니다.<br><br>
- 보통 금연앱은 어떻게 만들까 사전 조사를 해보니, 보통 저처럼 로그인 기능을 만들지 않고, 디바이스 내부의 그 사용자의 금연정보를 저장하기 때문에<br><br>
sharedpreferences를 이용한다는 사실은 알았지만, 저 같은 경우에는 액티비티가 화면에 보이고, 그 위에 프래그먼트가 보이는 순간에 서버에서 값을 가져오기 때문에,<br><br>
프래그먼트가 액티비티와 연결되고, 제일 먼저 호출되는 onAttach에 서버에서 금연정보를 가져오게 설계하였습니다. 하지만, 서버에서 가져오는 속도에는 한계가 있기 때문에,<br><br>
네비게이션바에 다른 탭으로 이동하는 중간마다 약간에 딜레이(?)가 발생하면서 과한 메모리로 앱이 죽어버리는 현상이 생겼습니다.<br><br>
이를 해결하기 위해 프래그먼트를 단 한 번만 인플레이션하고 나서 아무리 탭을 옮기며 다녀도, 다시 초기화(또 한 번에 인플레이션)하지 않게 프래그먼트를 hide하고 show 하는 방법으로,<br><br>
더 이상 앱이 죽지 않게 해결하였습니다. <br><br>
또한, 사실상 홈 프래그먼트에 메인 쓰레드가 프래그먼트 2개의 데이터를 View model로 (금연을 하고 있는 이상) 쉬지 않고 전달하기 때문에, 앱이 보이지 않는 상황에서는 onStop() 메서드를<br><br>
사용하여 사용자가 앱을 종료할떄는 항상 쓰레드가 종료될 수 있게 코드를 설계하였습니다.<br><br>
또한, 제가 간편함을 위해 초반에 잘 모르고 접근 지정자를  이용해서 public static을 마음 껏 활용해 데이터를 전달하곤 했는데, 알고 보니<br><br>
이것이 Memory Leak(메모리 누수 현상)을 발생하는 가장 큰 원인 중 하나라는 소리를 듣고, 전체적인 코드를 다시 다짜기에는 시간이 오래 걸렸기 때문에, 어느 정도 접근지정자를 private로 바꾸며,<br><br>
앱 기능에는 이상이 없게 최대한 수정하였습니다. 여러 시행착오로 얻게 된 좋은 정보들이였습니다.<br><br>
- 프로필 설정, 이 역시 이미지는 FireBase에서 가져오거나 저장하였으며, 나머지 닉네임은 mysql에 저장하고 불러왔습니다.
<br><br>

![Screenshot_20210402-130113_study01](https://user-images.githubusercontent.com/74702665/113544610-93a4b980-9623-11eb-8989-a734fa8b7030.jpg)

<br><br>

![Screenshot_20210402-130122_study01](https://user-images.githubusercontent.com/74702665/113544863-0ca41100-9624-11eb-9e19-97a8c8d2a04f.jpg)
<br><br>
![Screenshot_20210402-130131_study01](https://user-images.githubusercontent.com/74702665/113544940-35c4a180-9624-11eb-83d7-f6760051889c.jpg)


<br><br>
https://user-images.githubusercontent.com/74702665/113541590-85539f00-961d-11eb-8c24-af62df397e77.mp4


<br><br>
- 아래와 같이 달력과 시간은 DatePicker와 TimePicker 메서드를 사용하여 전달 받은 값으로, 담배 타이머의 쓰레드를 작동시키게 설계하였습니다.<br><br>
날짜를 설정하고 바로 "금연하기" 버튼을 누르게 되면, 항상 현재 시간으로 맞춰져 있어(TextView에도 현재 날짜 표시) 현재 날짜로 바로 금연을 시작하게 만들었습니다.<br><br>
금연을 포기하게 되면, 사용자를 격려하기 위해 금연하기 버튼과 또 다른 다이얼로그를 만들어, 구분을 주었습니다.<br><br>
버튼이 같은 위치에 있어야 했기 때문에 visibility를 이용해 gone을 할지 show를 할지 편하게 설계해두었습니다.<br><br>
<br><br>

https://user-images.githubusercontent.com/74702665/113541693-b7fd9780-961d-11eb-8d24-ea36fd3331d2.mp4
<br><br>

- 흡연한 날 수 만큼 등급을 매겨, 성취감을 들게 하기 위한 목적으로 설계했습니다. 홈 화면에 프래그먼트에서 쓰레드가 생성이 되면,<br><br>
- ViewModel을 통해서 데이터가 전달이 되어 그에 맞는 Progressbar에 게이지의 set을 해주었습니다.<br><br>
목표점에 도달하면 이미지를 홈 프래그먼트에 프로필에도 이미지 리소스를 set하게 하였고, 동시에 흡연 등급표 프래그먼트에서도 이미지가 set할 수 있게 설정하였습니다.<br><br>
- 최대 80년 가까이 금연을 설정할 수 있게 하기위해, 쓰레드에서 초 단위로 값을 받게 하였는데, int에 숫자값을 받는 데 한계가 있어 long을 사용하였고,<br><br>
데이터베이스에서는 BigInt를 사용해, 큰 숫자 범위에 값도 들어갈 수 있게 설정해두었습니다.<br><br>

<br><br>

![Screenshot_20210402-130136_study01](https://user-images.githubusercontent.com/74702665/113544984-4aa13500-9624-11eb-8f0a-f59221484ed8.jpg)

<br><br>
![Screenshot_20210402-130207_study01](https://user-images.githubusercontent.com/74702665/113544986-4c6af880-9624-11eb-8c8b-826a145d1bcc.jpg)

<br><br>
https://user-images.githubusercontent.com/74702665/113541870-0874f500-961e-11eb-92f8-380aa924f2a5.mp4

<br><br>
- MetrialCalenderView 라이브러리를 이용해, 선택한 날짜에 값을 받아 데이터베이스에 넘겨주고, 그에 맞는 값을 받아, 일기 정보를 받아왔으며,<br><br>
그에 맞는 이미지를 구글 파이어베이스 스토리지에 저장된 이미지를 가져와 달력이 선택될때마다 날짜에 맞는 일기를 볼 수 있게 구현했습니다.<br><br>
라이브러리의 대한 정보가 없어서 찾기 애매했지만, 코드르 잘 살펴보고, ArrayList를 잘 활용하여 일기를 생성할 때마다 날짜값을 배열에다가 넣어, 일기에<br><br>
갯수를 설정하였으며, 모든 정보를 한번에 불러온다면 데이터 손실과 메모리를 과도하게 잡아 먹기 때문에 날짜를 클릭할 때마다 받아올 수 있는 캘린더 뷰가 적합하다고 판단했습니다.<br><br>
날짜 클릭할때마다 해당 데이터만 불러오고, 그에 맞는 이미지는 파이어베이스 스토리지에서 그에 맞는 이미지를 불러오게 하였습니다.
<br><br>

https://user-images.githubusercontent.com/74702665/113542036-61448d80-961e-11eb-9530-271fe068f54e.mp4

<br><br>

- 그 동안 금연을 해오면서 썼던 일기를 한 번에 볼 수 있게 리사이클러뷰로 전체보기 기능을 구현했습니다.<br><br>
뷰 홀더에 아이템을 담아서 일기가 생성될 때마다 새로운 객체에 담아서 아이템을 만들게 구현하였고,<br><br>
스크롤을 내릴때마다 로딩이 되어 새로운 아이템이 나오도록 구현을 하는데 어려움이 있었지만,<br><br>
커뮤니티에서 여러조언을 얻고, smooth메서드를 활용하여 이를 해결하였습니다.<br><br>
객체를 클릭하면 그에 맞는 일기를 가져오게 만들었습니다.<br><br>
이 부분은 리사이클러뷰에 데이터 전달을 인터페이스로 원활하게 구현하였습니다.
<br><br>

![Screenshot_20210402-130216_study01](https://user-images.githubusercontent.com/74702665/113545034-6278b900-9624-11eb-83c5-a175ac2b150f.jpg)


<br><br>
![Screenshot_20210402-130219_study01](https://user-images.githubusercontent.com/74702665/113545036-63a9e600-9624-11eb-8937-7c547d0daaa5.jpg)


<br><br>

![Screenshot_20210402-130223_study01](https://user-images.githubusercontent.com/74702665/113545037-64427c80-9624-11eb-8d09-41b0a634dcfe.jpg)


<br><br>

https://user-images.githubusercontent.com/74702665/113542247-d4e69a80-961e-11eb-885d-2dfaa25cb14c.mp4

<br><br>

- 마무리는 설정탭입니다. 금연 재설정을 이 곳에서 할 수 있고, 위에서 말씀드린 것처럼 저 또한 금연을 하고 있다는 사실을 <br><br>
알려주어 금연하시는 분들에게 동기부여를 할 수 있는 저만의 금연 일자를 넣기도 하였습니다. 혼자가 아닌 함께 금연을 하고 있다는<br><br>
사실을 알려주어 서비스를 이용하는 사용자가 조금이라도 금단증상에서 도움이 되기위함에 한 번 넣어보았습니다.<br><br>
- 이 기능 역시 간단한 SimpleDateformat 메서드로 오늘 날짜와 미리 코드에 입력해 두었던 저의 금연 시작날의 차이를 구하여,<br><br>
제가 굳이 만지지 않아도 날짜가 올라가게 설정해두었습니다.<br><br>

## ReView
#### 개발을 아예 하지도 않았던 비전공자였지만, 배우는 것을 두려워하지 않았습니다. 누구나 무엇이든 부딪히면 어떤 일이든 해낼 수 있다고 믿기 때문에, 두려움은 없었습니다.<br><br>
한 가지 힘들었던 건 주변에 개발에 대해 아는 사람이 많지 않아, 모르는 게 생길 때마다 어려움을 겪었습니다. 하지만, 오히려 에러나 어려운 상황이 생길 때마다 혼자 문제점을 찾는 습관이<br><br>
생기게 되었습니다. 하루 코딩 공부가 끝나거나 프로젝트가 끝나고, 오늘 막혔던 부분을 밥 먹거나 걸으면서 계속해서 생각해내어 어떻게든 문제를 해결해왔습니다.<br><br>
그렇게 해결한 문제들은 그날 까먹지 않기 위해 블로그에 내용을 정리해두었습니다. 이렇게 아무리 어려운 순간이 와도 해결했던 경험들 때문에 그 이후에 문제들 역시,<br><br>
막히면 두려움 없이 무조건 찾아낸다. 라는 마음으로 프로그래밍에 임했습니다. 누군가에게는 그냥 고작 금연 앱 하나일진 몰라도 저는 이 앱을 만드는 과정을 통해, 앱을 만들 때<br><br>
어떤 자세로 임해야 하고, 어떤 과정을 거치는지를 포함한 그보다 더한 가치를 배웠다고 생각합니다. 그것은 바로 자신감이고, 항상 배우려는 자세입니다. 저는 이 자세로 회사에 들어가<br><br>
많은 것을 배우고, 경험하여 제 가치를 증명하고 회사에 보탬이 되는 사람이 되고 싶습니다. 항상 하고 싶은 일을 찾고 다녔던 저에게 이 개발이란 것은 종착지라고 생각합니다. 열정을 불태우겠습니다.<br><br>
감사합니다.<br><br>

https://daldalhanstory.tistory.com/
저의 개발 블로그입니다.

## 현재 앱은 배포 준비 중이며, 심사를 기다리는 중입니다.

